# 端口 3001 前端問題解決方案

## 🎯 問題確認
- 前端運行在端口 3001 (http://localhost:3001)
- 顯示 "Please connect to Hardhat Local (Chain ID: 31337)" 錯誤
- 所有合約數據顯示為 0
- 白名單無法自動申請

## ✅ 已完成的修復
1. **停止所有舊的前端進程**
2. **重新啟動前端在端口 3001**
3. **確認配置正確** (Chain ID: 1337)
4. **後端狀態正常** (Hardhat 節點運行，合約已部署)

## 🔧 現在請按照以下步驟操作

### 1. 清除瀏覽器緩存
```
1. 打開瀏覽器開發者工具 (F12)
2. 右鍵點擊刷新按鈕
3. 選擇 "清空緩存並硬性重新載入" (Ctrl+Shift+R)
```

### 2. 檢查 MetaMask 網絡設置
確保 MetaMask 連接到正確的網絡：
- **網絡名稱**: `Hardhat Local`
- **RPC URL**: `http://127.0.0.1:8545`
- **Chain ID**: `1337` (重要：不是 31337)
- **貨幣符號**: `ETH`

### 3. 訪問測試頁面
```
1. 訪問: http://localhost:3001/test
2. 點擊 "測試連接" 按鈕
3. 檢查是否顯示正確的合約數據
```

### 4. 訪問預售頁面
```
1. 訪問: http://localhost:3001/presale
2. 點擊 "Connect Wallet"
3. 確認不再顯示網絡錯誤
```

## 🎯 預期結果

### 成功連接後應該看到：
- ✅ 不再顯示 "Chain ID: 31337" 錯誤
- ✅ 預售進度顯示正確數據：
  - Token Price: 0.1 USDT
  - Min Purchase: 100 MTK
  - Max Purchase: 10,000 MTK
  - Total for Sale: 500,000 MTK
- ✅ 錢包餘額顯示 1000 USDT
- ✅ 白名單狀態顯示 "Not Whitelisted"
- ✅ 可以點擊 "Apply" 申請白名單
- ✅ 可以輸入數量購買代幣

## 🆘 如果問題仍然存在

### 檢查 1: 瀏覽器控制台
```
1. 打開開發者工具 (F12)
2. 查看 Console 標籤
3. 檢查是否有 JavaScript 錯誤
4. 查看 Network 標籤中的請求狀態
```

### 檢查 2: 測試頁面結果
訪問 http://localhost:3001/test 並告訴我：
- 連接狀態顯示什麼？
- 是否有錯誤信息？
- 合約數據是否正確顯示？

### 檢查 3: 系統狀態
```bash
# 檢查 Hardhat 節點
lsof -i :8545

# 檢查前端
lsof -i :3001
```

## 📋 當前系統狀態
- ✅ Hardhat 節點：運行中 (端口 8545)
- ✅ 前端：運行中 (端口 3001)
- ✅ 合約：已部署並初始化
- ✅ 預售：活躍狀態
- ✅ 白名單：已啟用
- ✅ 測試用戶：有 1000 USDT

## 🔄 如果所有方法都失敗

如果按照以上步驟仍然無法解決問題，請：

1. **截圖測試頁面結果** (http://localhost:3001/test)
2. **截圖瀏覽器控制台錯誤**
3. **截圖 MetaMask 網絡設置**
4. **提供具體的錯誤信息**

然後我們可以進行更深入的故障排除。

## 🎉 成功標誌

當一切正常時，你應該能夠：
1. 成功連接錢包
2. 看到正確的預售數據
3. 申請白名單
4. 購買代幣

現在請先嘗試清除瀏覽器緩存並重新訪問 http://localhost:3001/presale！ 