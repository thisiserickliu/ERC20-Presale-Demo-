# 自助白名單功能測試指南

## 🎉 部署成功！

您的預售項目已經成功部署並具備完整的自助白名單功能！

### 📊 部署摘要
- **網絡**: 本地 Hardhat (Chain ID: 31337)
- **MockUSDT**: 0x5FbDB2315678afecb367f032d93F642f64180aa3
- **MyToken**: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
- **Presale**: 0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
- **預售開始**: 7/25/2025, 11:12:43 PM
- **預售結束**: 8/24/2025, 11:11:43 PM

## 🧪 測試自助白名單功能

### 1. 準備 MetaMask

1. **添加本地網絡**：
   - 網絡名稱：Hardhat Local
   - RPC URL：http://127.0.0.1:8545
   - Chain ID：31337
   - 貨幣符號：ETH

2. **導入測試賬戶**：
   - 私鑰：0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80
   - 地址：0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
   - 餘額：10000 ETH + 1000 USDT

### 2. 訪問前端

1. **打開瀏覽器**：http://localhost:3000
2. **點擊 "PRESALE"** 導航到預售頁面
3. **連接錢包**：點擊 "Connect Wallet" 按鈕

### 3. 測試自助白名單

#### 步驟 1：查看初始狀態
- 檢查 "Whitelist" 卡片
- 應該顯示 "Not Whitelisted" 狀態
- 應該顯示 "Apply" 按鈕

#### 步驟 2：申請白名單
- 點擊 "Apply" 按鈕
- 在 MetaMask 中確認交易
- 等待交易完成

#### 步驟 3：驗證申請結果
- 白名單狀態應該變為 "Whitelisted"
- "Apply" 按鈕應該消失
- 顯示綠色勾號圖標

### 4. 測試購買功能

#### 步驟 1：批准 USDT
- 在 "Token Purchase" 卡片中
- 點擊 "Approve USDT" 按鈕
- 在 MetaMask 中確認交易

#### 步驟 2：購買代幣
- 輸入要購買的代幣數量（100-10,000）
- 點擊 "Buy Tokens" 按鈕
- 在 MetaMask 中確認交易

#### 步驟 3：驗證購買結果
- 檢查錢包餘額更新
- 檢查 "Purchased in Presale" 更新
- 檢查預售統計數據更新

### 5. 測試多個賬戶

#### 使用不同賬戶測試
1. **切換 MetaMask 賬戶**：
   - 賬戶 1：0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
   - 賬戶 2：0x70997970C51812dc3A010C7d01b50e0d17dc79C8
   - 賬戶 3：0x3C44CdDdB6a900fa2b585dd299e03d12FA4293BC

2. **重複測試流程**：
   - 每個賬戶都需要申請白名單
   - 每個賬戶都可以獨立購買代幣

### 6. 測試錯誤情況

#### 測試重複申請
- 已經在白名單中的賬戶
- 再次點擊 "Apply" 應該失敗
- 顯示錯誤信息

#### 測試未加入白名單購買
- 使用未加入白名單的賬戶
- 嘗試購買代幣應該失敗
- 顯示 "Address not whitelisted" 錯誤

#### 測試餘額不足
- 使用餘額不足的賬戶
- 嘗試購買超過餘額的代幣
- 應該顯示餘額不足錯誤

## 🔧 故障排除

### 常見問題

1. **無法連接錢包**：
   - 確保 MetaMask 已安裝
   - 確保連接到正確的網絡
   - 刷新頁面重試

2. **交易失敗**：
   - 檢查網絡連接
   - 檢查餘額是否足夠
   - 檢查是否在白名單中

3. **狀態未更新**：
   - 等待交易確認
   - 刷新頁面
   - 重新連接錢包

4. **顯示錯誤數據**：
   - 清除瀏覽器緩存
   - 重新啟動前端
   - 檢查合約地址是否正確

### 重置環境

如果需要重置測試環境：

```bash
# 停止前端
Ctrl+C

# 重新部署合約
cd blockchain
npx hardhat run scripts/quick-start.js

# 重新啟動前端
cd frontend
npm start
```

## 📊 預期結果

### 成功的自助白名單流程
1. ✅ 用戶連接錢包
2. ✅ 查看白名單狀態（未加入）
3. ✅ 點擊申請按鈕
4. ✅ 確認交易
5. ✅ 狀態更新為已加入
6. ✅ 可以購買代幣

### 成功的購買流程
1. ✅ 批准 USDT
2. ✅ 輸入購買數量
3. ✅ 確認購買交易
4. ✅ 餘額更新
5. ✅ 預售統計更新

## 🎯 功能驗證清單

- [ ] 錢包連接正常
- [ ] 白名單狀態顯示正確
- [ ] 自助申請功能正常
- [ ] 重複申請防護正常
- [ ] USDT 批准功能正常
- [ ] 代幣購買功能正常
- [ ] 餘額更新正確
- [ ] 錯誤處理正常
- [ ] 多賬戶測試正常

## 🎉 恭喜！

您的自助白名單預售系統已經完全就緒！用戶現在可以：

1. **輕鬆申請白名單**：一鍵申請，無需管理員操作
2. **即時參與預售**：申請成功後立即可購買代幣
3. **安全可靠**：智能合約確保所有操作安全
4. **用戶友好**：清晰的界面和狀態提示

現在您可以開始向用戶推廣您的預售項目了！🚀✨ 