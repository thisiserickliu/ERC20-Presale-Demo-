# 白名單管理後台使用說明

## 功能概述

這是一個功能完整的白名單管理後台，專為 ERC20 預售專案設計。只有合約擁有者（Owner）可以訪問和管理白名單功能。

## 主要功能

### 1. 白名單狀態管理
- **啟用/停用白名單**：控制是否啟用白名單驗證
- **即時狀態顯示**：顯示當前白名單啟用狀態
- **權限控制**：只有合約擁有者可以管理

### 2. 地址管理
- **新增地址**：單個或批次新增地址到白名單
- **移除地址**：單個或批次從白名單移除地址
- **狀態切換**：快速切換地址的白名單狀態

### 3. 批次操作
- **全選/取消全選**：快速選擇所有顯示的地址
- **批次加入**：一次性將選中的地址加入白名單
- **批次移除**：一次性將選中的地址從白名單移除

### 4. 資料匯入/匯出
- **CSV 匯入**：支援從 CSV 檔案匯入地址列表
- **CSV 匯出**：匯出當前白名單到 CSV 檔案
- **格式支援**：標準 CSV 格式，地址在第一列

### 5. 搜尋與篩選
- **即時搜尋**：根據地址進行即時搜尋
- **結果篩選**：只顯示符合搜尋條件的地址

### 6. 統計資訊
- **總計數量**：顯示所有記錄的總數
- **已加入數量**：顯示已加入白名單的地址數量
- **未加入數量**：顯示未加入白名單的地址數量

## 使用流程

### 1. 連接錢包
1. 確保已安裝 MetaMask
2. 連接到 Hardhat 網路（Chain ID: 31337 或 1337）
3. 使用合約擁有者的錢包地址連接

### 2. 管理白名單
1. **啟用白名單**：點擊開關按鈕啟用白名單功能
2. **新增地址**：
   - 點擊「新增地址」按鈕
   - 在彈出視窗中輸入地址（每行一個）
   - 點擊「新增」確認
3. **批次操作**：
   - 勾選要操作的地址
   - 點擊「批次加入」或「批次移除」
4. **匯入/匯出**：
   - 點擊「匯入 CSV」或「匯出 CSV」
   - 按照提示操作

### 3. 監控狀態
- 查看統計資訊了解白名單狀態
- 使用搜尋功能快速找到特定地址
- 監控操作結果和錯誤訊息

## 技術規格

### 合約函數
- `setWhitelist(address[] users, bool[] statuses)` - 設定白名單狀態
- `setWhitelistEnabled(bool enabled)` - 啟用/停用白名單
- `whitelistEnabled()` - 查詢白名單啟用狀態
- `whitelist(address user)` - 查詢用戶白名單狀態
- `owner()` - 查詢合約擁有者

### 前端技術
- **React.js** - 前端框架
- **Ethers.js** - 區塊鏈互動
- **Tailwind CSS** - 樣式框架
- **現代化 UI** - 響應式設計

## 安全注意事項

### 1. 權限控制
- 只有合約擁有者可以管理白名單
- 前端會自動檢查權限並隱藏管理功能
- 所有操作都需要錢包簽名確認

### 2. 資料驗證
- 自動驗證地址格式
- 防止重複操作
- 錯誤處理和用戶提示

### 3. 操作確認
- 重要操作需要用戶確認
- 交易狀態即時顯示
- 操作結果明確反饋

## 測試

### 運行測試腳本
```bash
npx hardhat run test-whitelist.js
```

### 測試內容
1. 檢查白名單狀態
2. 新增/移除地址
3. 批次操作
4. 白名單開關
5. 權限驗證

## 故障排除

### 常見問題

1. **無法連接錢包**
   - 檢查 MetaMask 是否已安裝
   - 確認網路設定正確
   - 檢查錢包是否已解鎖

2. **權限不足**
   - 確認使用的是合約擁有者地址
   - 檢查合約部署是否成功
   - 重新連接錢包

3. **交易失敗**
   - 檢查 Gas 費用設定
   - 確認網路擁塞情況
   - 檢查合約狀態

4. **地址格式錯誤**
   - 確認地址格式正確（0x開頭，42位字符）
   - 檢查地址是否有效
   - 移除多餘的空格

### 錯誤訊息
- `Address not whitelisted` - 地址不在白名單中
- `Only owner can call this function` - 權限不足
- `Invalid address format` - 地址格式錯誤
- `Transaction failed` - 交易失敗

## 擴展功能建議

### 1. 進階管理
- 多角色權限管理
- 白名單分組功能
- 自動化規則設定

### 2. 資料管理
- 資料庫整合
- 備份和恢復功能
- 歷史記錄追蹤

### 3. 用戶體驗
- 批量檔案上傳
- 拖拽操作
- 鍵盤快捷鍵

### 4. 監控分析
- 操作日誌
- 使用統計
- 效能監控

## 聯絡支援

如有問題或建議，請聯繫開發團隊或查看專案文檔。 